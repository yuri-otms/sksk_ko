name: sksk_ko
services:

  nginx:
    container_name: sksk_ko_nginx
    build: ./nginx
    environment:
      VIRTUAL_HOST: ${VIRTUAL_HOST}
      LETSENCRYPT_HOST: ${LETSENCRYPT_HOST}
      LETSENCRYPT_EMAIL: ${LETSENCRYPT_EMAIL}
      CERT_NAME: default
    depends_on:
      - python

  python:
    container_name: sksk_ko_python
    build: ./python
    volumes:
      - ../../sksk_ko:/sksk
    command: gunicorn 'sksk_app:create_app()' -b 0.0.0.0:5000 --reload
    tty: true
    expose:
      - 5000
    external_links:
      - yuru_mysql

networks:
  default:
    external: true
    name: sakura-network